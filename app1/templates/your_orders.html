<!doctype html>
<html lang="en">

<head>
  {% load static %}
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<!-- bootstrap -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
  crossorigin="anonymous"
/>
  <!-- Amazon FavIcon -->
  <link rel="icon" href="{% static 'img/logo.png' %}" image="image/gif" size="16x16">
  <!-- Bootstrap CSS
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <!-- Font Awesome CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
    integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
    crossorigin="anonymous" />
  <!-- Bootstrap CSS Local -->
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <!-- Drawer CSS File -->
  <link rel="stylesheet" href="{% static 'css/bootstrap-drawer.min.css' %}">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/custom.css' %}">
  <title>Isekai : Your Orders</title>
</head>

<body>
<!-- Messenger Chat plugin Code -->
<div id="fb-root"></div>

<!-- Your Chat plugin code -->
<div id="fb-customer-chat" class="fb-customerchat">
</div>

<script>
  var chatbox = document.getElementById('fb-customer-chat');
  chatbox.setAttribute("page_id", "210840512103500");
  chatbox.setAttribute("attribution", "biz_inbox");
</script>

<!-- Your SDK code -->
<script>
  window.fbAsyncInit = function() {
    FB.init({
      xfbml            : true,
      version          : 'v18.0'
      
    });
  };

  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<!-- Messenger Chat plugin Code -->
    <div id="fb-root"></div>

    <!-- Your Chat plugin code -->
    <div id="fb-customer-chat" class="fb-customerchat">
    </div>

    <script>
      var chatbox = document.getElementById('fb-customer-chat');
      chatbox.setAttribute("page_id", "210840512103500");
      chatbox.setAttribute("attribution", "biz_inbox");
    </script>

    <!-- Your SDK code -->
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          xfbml            : true,
          version          : 'v18.0'
        });
      };

      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>





  <!-- Navbar Starts -->
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <!-- Drawer Start -->
    <button class="btn btn-outline-light" data-toggle="drawer" data-target="#amazonDrawer">
      <i class="fas fa-sliders-h"></i>
    </button>

    <div class="drawer drawer-left slide" tabindex="-1" role="dialog" aria-labelledby="drawer-demo-title"
      aria-hidden="true" id="amazonDrawer">
      <div class="drawer-content drawer-content-scrollable" role="document">
        <div class="drawer-header bg-dark text-white">
          <h4 class="drawer-title mx-auto" id="drawer-demo-title">
            <i class="fas fa-user-circle"></i>
            {% if 'user_id' not in request.session %}
            Hello, Sign In
            {% endif %}
            {% if 'user_id' in request.session %}
            Hello {{request.session.username}}
            {% endif %}
          </h4>
        </div>
        <div class="drawer-body">
          <h6 class="text-muted text-uppercase">Help & Settings</h6>
          <a href="/your_account" class="btn btn-outline-success my-2 btn-sm">You Account</a>
          {% if 'user_id' not in request.session %}
          <a href="/login" class="btn btn-warning my-2  btn-sm">Sign in</a>
          <a href="/register" class="btn btn-warning my-2  btn-sm">SignUp</a>
          {% endif %}
          {% if 'user_id' in request.session %}
          <a href="/logout" class="btn btn-warning my-2  btn-sm">Logout</a>
          {% endif %}
        </div>
        <div class="drawer-footer">
          <button type="button" class="btn btn-outline-danger btn-sm" data-dismiss="drawer" aria-label="Close">
            <i class="fas fa-2x fa-times"></i>
          </button>
        </div>
      </div>
    </div> <!-- Drawer Ends -->

    <a class="navbar-brand pl-2" href="/">
      <img src="{% static 'img/logo.png' %}" height="40" width="100" alt="logo">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Search Bar Starts -->
      <form class="form-inline px-lg-5" novalidate method="get">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" name="btnCategory" type="button"
                id="btnCategoryDropdownMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                All
              </button>
              <div class="dropdown-menu" aria-labelledby="btnCategoryDropdownMenu">
                <a class="dropdown-item" href="#">All</a>
                <a class="dropdown-item" href="#">Smartphone</a>
                <a class="dropdown-item" href="#">Kitchen Hardware</a>
                <a class="dropdown-item" href="#">Prime Deals</a>
                <a class="dropdown-item" href="#">Book</a>
              </div>
            </div>
          </div>
          <input type="text" class="form-control" size="50" name="query" id="query">
          <input type="text" name="category" id="category" value="book" hidden>
          <div class="input-group-append">
            <button type="submit" class="btn btn-warning">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </form> <!-- Search Bar Ends -->
      <ul class="navbar-nav">
        <!-- Preffered Language Starts -->
        <li class="nav-item dropdown px-2">
          <a class="nav-link" href="#" id="prefLanguageDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-2x fa-language"></i>
          </a>
          <div class="dropdown-menu" aria-labelledby="prefLanguageDropdown">
            <form class="p-3">
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio mb-2">
                <input class="custom-control-input" type="radio" name="prefLang" id="englishLang" value="english"
                  checked>
                <label class="custom-control-label" for="englishLang">
                  <img src="{% static 'img/flag/english.jpg' %}" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio mb-2">
                <input class="custom-control-input" type="radio" name="prefLang" id="hindiLang" value="hindi" checked>
                <label class="custom-control-label" for="hindiLang">
                  <img src="{% static 'img/flag/hindi.svg' %}" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio mb-2">
                <input class="custom-control-input" type="radio" name="prefLang" id="urduLang" value="urdu" checked>
                <label class="custom-control-label" for="urduLang">
                  <img src="{% static 'img/flag/urdu.svg' %}" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio">
                <input class="custom-control-input" type="radio" name="prefLang" id="banglaLang" value="bangla" checked>
                <label class="custom-control-label" for="banglaLang">
                  <img src="{% static 'img/flag/bangla.jpg' %}" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
            </form>
          </div>
        </li> <!-- Preffered Language Ends -->
        <!-- User Account Starts -->
        <li class="nav-item dropdown px-2">
          <a class="nav-link" href="/login" id="userAccount" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-2x fa-user-circle"></i>
          </a>
          <div class="dropdown-menu px-3" aria-labelledby="userAccount">
            <div class="d-flex flex-column justify-content-center">
              <a href="/login" class="btn btn-warning w-75 btn-sm font-weight-bold">Signin</a>
              <small>New customer?<a href="/register"> Start here.</a></small>
            </div>
          </div>
        </li> <!-- User Account Ends -->
        <!-- Shopping Cart Starts -->
        <li class="nav-item px-2">
          <a class="nav-link" href="/cart" aria-disabled=" true">
            <i class="fas fa-2x text-light fa-shopping-cart"></i>
            {% if 'user_id' not in request.session %}
            <span class="badge badge-warning badge-pill">0</span>
            {% endif %}

            
            {% if 'user_id' in request.session %}

            <!-- <span class="badge badge-warning badge-pill">{{allitems.all|length}}</span> -->
            
            <span class="badge badge-warning badge-pill">{{specific_user.order_items_for_user.count}}</span>
            
            {% endif %}
           
          </a>
        </li> <!-- Shopping Cart Starts -->
      </ul>
    </div>
  </nav> <!-- Navbar Ends -->

  <div class="container mt-5 mb-5">
    <!-- URL Breadcrumb Starts -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb bg-transparent ml-n3">
        <li class="breadcrumb-item"><a href="/your_account">Your Account</a></li>
        <li class="breadcrumb-item active text-danger" aria-current="page">Your Orders</li>
      </ol>
    </nav> <!-- URL Breadcrumb Ends -->

    <!-- Search Orders Starts -->
    <div class="row">
      <div class="col-md-4">
        <h3>Your Orders</h3>
      </div>
      <div class="col-md-8">
        <!-- <form class="form-inline float-md-right">
          <div class="input-group">
            <div class="input-group-prepend">
              <button type="button" class="btn btn-dark">
                <i class="fas fa-search"></i>
              </button>
            </div>
            <input type=text class="form-control" name="orderName" id="orderName" />
            <div class="input-group-append">
              <button type="submit" class="btn btn-dark">Search orders</button>
            </div>
          </div>
        </form> -->

        <div class="form-inline px-lg-5" >
          <div class="input-group ms-2" type="button">
            <!-- mobile -->
            <span class="input-group-prepend d-lg-none" id="searchMenu" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
              <div class="input-group-text bg-gray border-0 rounded-circle" style="min-height: 40px">
                <i class="fas fa-search text-muted"></i>
              </div>
            </span>
            <!-- desktop -->
            <span class="input-group-prepend d-none d-lg-block" id="searchMenu" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
              <div class="input-group-text bg-gray border-0 rounded-pill" style="min-height: 40px; min-width: 230px">
                <i class="fas fa-search me-2 text-muted"></i>
                <form action="/search_order" method="POST" id="orderForm">
                  {% csrf_token %}
                <input id="search_order" name="search_order_ajax" type="text" class="rounded-pill border-0 bg-gray dropdown-item" placeholder="Search Isekai..." autofocus="" size="50">
                </form>
              </div>
            </span>
            <!-- search menu -->
            <ul id="order_results" class="dropdown-menu overflow-auto border-0 shadow p-3" aria-labelledby="searchMenu" style="width: 32em; max-height: 600px;">
              <!-- search input -->
  
              <!-- search 1 -->
  
            </ul>
          </div>
        </div>
        <!-- Search Bar Starts -->

      </div>
    </div> <!-- Search Orders Starts -->

    <!-- Order Card Starts -->
    {% for order in all_orders %}
    <div class="card mt-5">
      <div class="card-header">
        <div class="row">
          <div class="col-md-4 mt-3 mt-md-0">
            <p class="text-uppercase text-muted my-0">order placed</p>
            <p class="text-uppercase text-muted my-0">{{order.start_date}}</p>
          </div>

          <div class="col-md-4 mt-3 mt-md-0">
            <p class="text-uppercase text-muted my-0">total</p>
            <p class="text-uppercase text-muted my-0">
              <i class="fas fa-dollar-sign"></i> {{order.total_payed_amount}}
            </p>
          </div>

          <div class="col-md-4 mt-3 mt-md-0">
            <p class="text-uppercase text-muted my-0 float-md-right">order # {{order.ref_code}} <a href="/invoice" class="btn btn-outline-info btn-sm w-50 ml-auto my-1">Generate Invoice</a></p>
            
          </div>
        </div>
      </div>
      {% for allitems in order.items.all %}
      <div class="card-body">
        <div class="row">
          <div class="col-md-1">
            <img src="{{allitems.item.item_image.url}}" width="58" height="90" alt="product 01 image">
          </div>

          <div class="col-md-5">
            <a href="/product/{{allitems.item.id}}">{{allitems.item.title}}</a>
            <p class="text-muted my-0">quantity: {{allitems.quantity}}</p>
            <p class="text-uppercase my-0">
              <i class="fas fa-dollar-sign"></i> <span class="text-danger">{{allitems.item.price}}/unit price</span>
            </p>
          </div>


        </div>
      </div>
      {% endfor %}
    </div> <!-- Order Card Starts -->
    {% endfor %}
  </div>

  <!-- Optional JavaScript -->
  <script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
  crossorigin="anonymous"
></script>
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"></script>
  <!-- Drawer JS File -->
  <script src="{% static 'js/bootstrap-drawer.min.js' %}"></script>
  <!-- Custom JavaScript -->
  <script src="{% static 'js/custom.js' %}"></script>
  <script src="{% static 'js/main.js' %}"></script>
</body>

</html>