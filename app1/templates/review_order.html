<!doctype html>
<html lang="en">

<head>
  {% load static %}
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Amazon FavIcon -->
  <link rel="icon" href="{% static 'img/amazon_favicon.ico' %}" image="image/gif" size="16x16">
  <!-- Bootstrap CSS
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"> -->

  <!-- Font Awesome CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
    integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
    crossorigin="anonymous" />
  <!-- Bootstrap CSS Local -->
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <!-- Drawer CSS File -->
  <link rel="stylesheet" href="{% static 'css/bootstrap-drawer.min.css' %}">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/custom.css' %}">
  <title>Isekai : Review Order</title>
</head>

<body>
<!-- Messenger Chat plugin Code -->
<div id="fb-root"></div>

<!-- Your Chat plugin code -->
<div id="fb-customer-chat" class="fb-customerchat">
</div>

<script>
  var chatbox = document.getElementById('fb-customer-chat');
  chatbox.setAttribute("page_id", "210840512103500");
  chatbox.setAttribute("attribution", "biz_inbox");
</script>

<!-- Your SDK code -->
<script>
  window.fbAsyncInit = function() {
    FB.init({
      xfbml            : true,
      version          : 'v18.0'
      
    });
  };

  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<!-- Messenger Chat plugin Code -->
    <div id="fb-root"></div>

    <!-- Your Chat plugin code -->
    <div id="fb-customer-chat" class="fb-customerchat">
    </div>

    <script>
      var chatbox = document.getElementById('fb-customer-chat');
      chatbox.setAttribute("page_id", "210840512103500");
      chatbox.setAttribute("attribution", "biz_inbox");
    </script>

    <!-- Your SDK code -->
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          xfbml            : true,
          version          : 'v18.0'
        });
      };

      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>




  <!-- Navbar Starts -->
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <!-- Drawer Start -->
    <button class="btn btn-outline-light" data-toggle="drawer" data-target="#amazonDrawer">
      <i class="fas fa-sliders-h"></i>
    </button>

    <div class="drawer drawer-left slide" tabindex="-1" role="dialog" aria-labelledby="drawer-demo-title"
      aria-hidden="true" id="amazonDrawer">
      <div class="drawer-content drawer-content-scrollable" role="document">
        <div class="drawer-header bg-dark text-white">
          <h4 class="drawer-title mx-auto" id="drawer-demo-title">
            <i class="fas fa-user-circle"></i>
            {% if 'user_id' not in request.session %}
            Hello, Sign In
            {% endif %}
            {% if 'user_id' in request.session %}
            Hello {{request.session.username}}
            {% endif %}
          </h4>
        </div>
        <div class="drawer-body">
          <h6 class="text-muted text-uppercase">Help & Settings</h6>
          <a href="/your_account" class="btn btn-outline-success my-2 btn-sm">You Account</a>
          {% if 'user_id' not in request.session %}
          <a href="/login" class="btn btn-warning my-2  btn-sm">Sign in</a>
          <a href="/register" class="btn btn-warning my-2  btn-sm">SignUp</a>
          {% endif %}
          {% if 'user_id' in request.session %}
          <a href="/logout" class="btn btn-warning my-2  btn-sm">Logout</a>
          {% endif %}
        </div>
        <div class="drawer-footer">
          <button type="button" class="btn btn-outline-danger btn-sm" data-dismiss="drawer" aria-label="Close">
            <i class="fas fa-2x fa-times"></i>
          </button>
        </div>
      </div>
    </div> <!-- Drawer Ends -->

    <a class="navbar-brand pl-2" href="/">
      <img src="{% static 'img/logo.png' %}" height="40" width="100" alt="logo">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Search Bar Starts -->
      <form class="form-inline px-lg-5" novalidate method="get">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" name="btnCategory" type="button"
                id="btnCategoryDropdownMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                All
              </button>
              <div class="dropdown-menu" aria-labelledby="btnCategoryDropdownMenu">
                <a class="dropdown-item" href="#">All</a>
                <a class="dropdown-item" href="#">Smartphone</a>
                <a class="dropdown-item" href="#">Kitchen Hardware</a>
                <a class="dropdown-item" href="#">Prime Deals</a>
                <a class="dropdown-item" href="#">Book</a>
              </div>
            </div>
          </div>
          <input type="text" class="form-control" size="50" name="query" id="query">
          <input type="text" name="category" id="category" value="book" hidden>
          <div class="input-group-append">
            <button type="submit" class="btn btn-warning">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </form> <!-- Search Bar Ends -->
      <ul class="navbar-nav">
        <!-- Preffered Language Starts -->
        <li class="nav-item dropdown px-2">
          <a class="nav-link" href="#" id="prefLanguageDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-2x fa-language"></i>
          </a>
          <div class="dropdown-menu" aria-labelledby="prefLanguageDropdown">
            <form class="p-3">
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio mb-2">
                <input class="custom-control-input" type="radio" name="prefLang" id="englishLang" value="english"
                  checked>
                <label class="custom-control-label" for="englishLang">
                  <img src="img/flag/english.svg" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio mb-2">
                <input class="custom-control-input" type="radio" name="prefLang" id="hindiLang" value="hindi" checked>
                <label class="custom-control-label" for="hindiLang">
                  <img src="img/flag/hindi.svg" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio mb-2">
                <input class="custom-control-input" type="radio" name="prefLang" id="urduLang" value="urdu" checked>
                <label class="custom-control-label" for="urduLang">
                  <img src="img/flag/urdu.svg" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
              <div class="custom-control custom-radio">
                <input class="custom-control-input" type="radio" name="prefLang" id="banglaLang" value="bangla" checked>
                <label class="custom-control-label" for="banglaLang">
                  <img src="img/flag/bangla.svg" alt="uk flag" width="50" height="30">
                </label>
              </div>
              <div class="dropdown-divider"></div>
            </form>
          </div>
        </li> <!-- Preffered Language Ends -->
        <!-- User Account Starts -->
        <li class="nav-item dropdown px-2">
          <a class="nav-link" href="/login" id="userAccount" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-2x fa-user-circle"></i>
          </a>
          <div class="dropdown-menu px-3" aria-labelledby="userAccount">
            <div class="d-flex flex-column justify-content-center">
              <a href="/login" class="btn btn-warning w-75 btn-sm font-weight-bold">Signin</a>
              <small>New customer?<a href="/register"> Start here.</a></small>
            </div>
          </div>
        </li> <!-- User Account Ends -->
        <!-- Shopping Cart Starts -->
        <li class="nav-item px-2">
          <a class="nav-link" href="/cart" aria-disabled=" true">
            <i class="fas fa-2x text-light fa-shopping-cart"></i>
            {% if 'user_id' not in request.session %}
            <span class="badge badge-warning badge-pill">0</span>
            {% endif %}

            
            {% if 'user_id' in request.session %}

            <!-- <span class="badge badge-warning badge-pill">{{allitems.all|length}}</span> -->
            
            <span class="badge badge-warning badge-pill">{{specific_user.order_items_for_user.count}}</span>
            
            {% endif %}
           
          </a>
        </li> <!-- Shopping Cart Starts -->
      </ul>
    </div>
  </nav> <!-- Navbar Ends -->

  <!-- Review Order Starts -->
  <div class="container my-5">

    <!-- Progress Status -->
    <div class="d-flex flex-column">
      <!-- Cart Movement -->
      <div class="d-flex flex-row text-uppercase justify-content-around" style="font-size: 12px;">
        <p></p>
        <p></p>
        <p class="mb-0 pb-0"><i class="fas fa-cart-arrow-down fa-3x text-success"></i></p>
        <p></p>
      </div>

      <!-- Progress bar starts -->
      <div class="progress" style="height: 5px;">
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
          style="width: 25%; background-color: #e47911;"></div>
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
          style="width: 25%; background-color: #e47911;"></div>
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
          style="width: 12.5%; background-color: #e47911;"></div>
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
          style="width: 0%; background-color: #e47911;"></div>
      </div>

      <div class="d-flex flex-row text-uppercase justify-content-around" style="font-size: 12px;">
        <p>sign in</p>
        <p>delivery & payment</p>
        <p class="font-weight-bold">place order</p>
        <p class="text-muted">complete payment</p>
      </div>
    </div> <!-- Progress Status ends -->

    <h3>Review your order </h3>
    <p>By placing your order, you agree to Isekai's privacy notice and conditions of use.</p>
    <div class="dropdown-divider"></div>


    <div class="row">
      <!-- Product details -->
      <div class="col-md-8">
        <!-- Address & Payment Detail -->
        <div class="row">
          <div class="col-md-12">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <!-- Shipping Address -->
                  <!-- i comment this///motaz -->
                  <!-- <div class="col-md-4" style="font-size: 15px;">
                    <p class="font-weight-bold my-0 py-0">Shipping Address</p>
                    <p class="my-0 py-0">Full_Name: {{request.session.shipping_address_name}}</p>
                    <p class="my-0 py-0">Country: {{request.session.shipping_address_country}}</p>
                    <p class="my-0 py-0">Town: {{request.session.shipping_address_town}}</p>
                    <p class="my-0 py-0">Apartment: {{request.session.shipping_address_apartment}}</p>
                    <p class="my-0 py-0">Street: {{request.session.shipping_address_street}}</p>
                    <p class="my-0 py-0">Landmark: {{request.session.shipping_address_landmark}}</p>
                    <p class="my-0 py-0">PIN_code: {{request.session.shipping_address_pincode}}</p> 
                    <p class="my-0 py-0">Phone Number: {{request.session.shipping_address_mobile}}</p> 
                  </div> -->
                  <!-- i add this instead // motaz -->
                  <div class="col-md-4" style="font-size: 15px;">
                    <p class="font-weight-bold my-0 py-0">Full_Name: {{this_address.full_name}}</p>
                    <p class="my-0 py-0">Country: {{this_address.country}}</p>
                    <p class="my-0 py-0">Town: {{this_address.town}}</p>
                    <p class="my-0 py-0">Apartment: {{this_address.Apartment}}</p>
                    <p class="my-0 py-0">Street: {{this_address.street}}</p>
                    <p class="my-0 py-0">Landmark: {{this_address.landmark}}</p>
                    <p class="my-0 py-0">PIN_code: {{this_address.PIN_code}}</p> 
                    <p class="my-0 py-0">Phone Number: {{this_address.mobile_number}}</p>
                  </div>
                  <!-- Payment Method -->
                  <div class="col-md-4 text-center" style="font-size: 15px;">
                    <p class="font-weight-bold my-0 py-0">Payment Method</p>
                    <p>{{request.session.paymentMethod}}</p>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div> <!-- Address & Payment Detail ends -->

        <!-- Single Order Detail Card -->
        {% for item in specific_user.order_items_for_user.all%}
        <div class="row">
          <div class="col-md-12">
            <div class="card mt-3">
              <div class="card-body">
                <div class="row">

                  <!-- Product Image Col -->
                  <div class="col-md-2">
                    <img src="{{item.item.item_image.url}}"  class="img-fluid" alt="product 04 image">
                  </div>

                  <!-- Product Detail Col -->
                  <div class="col-md-6">
                    <a href="/product/{{item.item.id}}">{{item.item.title}}</a>
                    <p class="text-muted my-0">Sold by : Narendra Modi</p>
                    <p class="text-muted my-0">Paperback</p>
                    <p class="text-uppercase font-weight-bold my-0 text-danger">
                      <i class="fas fa-dollar-sign" style="font-size: 10px;"></i> <span>{{item.item.price}}</span>
                    </p>
                    <div class="d-flex flex-row mt-2">
                      <!-- Quatinty select -->
                      <div class="input-group" style="width: 90px;">
                        <div class="input-group-prepend">
                          <button class="btn btn-info btn-sm">-</button>
                        </div>
                        <input type="text" class="form-control form-control-sm" name="quantity" value="{{item.quantity}}" id="quantity"
                          disabled>
                        <div class="input-group-append">
                          <button class="btn btn-info btn-sm">+</button>
                        </div>
                      </div>
                      <!-- Delete product from list -->
                      <a href="/delete/{{item.id}}" class="ml-2">Delete</a>
                    </div>
                  </div> <!-- Product Detail Col ends -->
                </div>

              </div>
            </div>
          </div>
        </div> <!-- Single Order Detail Card ends -->
        {% endfor %}
      </div> <!-- Product details ends -->
      

      <!-- Place your order & pay -->
      <div class="col-md-4">
        <div class="card mt-md-0 mt-3">
          <div class="card-body">
            <form action="/create_order" method="POST">
              {% csrf_token %}
                <button class="btn btn-sm btn-warning btn-block text-capitalize">place your order and pay</button>
            </form>
            <p class="text-muted mt-2">You'll be securely redirected to Visa to enter your password and complete your
              purchase.</p>
            <p class="my-0">Order Summary</p>
            <div class="dropdown-divider"></div>
            <p class="my-0 text-danger font-weight-bold">Order Total:
              <span class="float-right">
                <i class="fas fa-dollar-sign"></i>
                {{request.session.total}}
              </span>
            </p>
            <div class="dropdown-divider"></div>
            <p class="my-0 text-danger font-weight-bold">Youe Savings:
              <span class="float-right">
                <i class="fas fa-dollar-sign"></i>
                {{request.session.saving}}
              </span>
            </p>
          </div> <!-- Card body ends -->

          <div class="card-footer">
            <p>Isekai Prime Delivery has been applied to the eligible items in your order.</p>
            <a href="/cancel_order_and_items"><button  class="btn btn-danger btn-sm btn-block">Cancel Order</button></a>
          </div>
        </div>
      </div> <!-- Place your order & pay ends -->
    </div>

  </div> <!-- Review Order Ends -->

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"></script>
  <!-- Drawer JS File -->
  <script src="{% static 'js/bootstrap-drawer.min.js' %}"></script>
  <!-- Custom JavaScript -->
  <script src="{% static 'js/custom.js' %}"></script>
</body>

</html>